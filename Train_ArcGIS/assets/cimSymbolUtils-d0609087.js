import{bf as m}from"./index-cb639cc1.js";import{f as p,M,y as k,m as n,C as h}from"./utils-35d9b505.js";function C(e,t,s,o){if(e)if(e.type!=="CIMTextSymbol"){if(s&&e.effects)for(const a of e.effects)b(a,t);if(e.symbolLayers)for(const a of e.symbolLayers)switch(a.type){case"CIMPictureMarker":case"CIMVectorMarker":d(a,t,o);break;case"CIMPictureStroke":case"CIMSolidStroke":!(o!=null&&o.preserveOutlineWidth)&&a.width&&(a.width*=t);break;case"CIMPictureFill":a.height&&(a.height*=t),a.offsetX&&(a.offsetX*=t),a.offsetY&&(a.offsetY*=t);break;case"CIMHatchFill":C(a.lineSymbol,t,!0,{...o,preserveOutlineWidth:!1}),a.offsetX&&(a.offsetX*=t),a.offsetY&&(a.offsetY*=t),a.separation&&(a.separation*=t)}}else e.height!=null&&(e.height*=t)}function d(e,t,s){if(e&&(e.markerPlacement&&I(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const o of e.markerGraphics)e.scaleSymbolsProportionally||C(o.symbol,t,!0,s)}function I(e,t){switch(n(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const s=e.placementTemplate.map(o=>o*t);e.placementTemplate=s}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const s=e.placementTemplate.map(o=>o*t);e.placementTemplate=s}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function b(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const s=e.dashTemplate.map(o=>o*t);e.dashTemplate=s}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function y(e,t,s){t instanceof m||(t=new m(t));const o=p(e);o&&r(o,t,s)}function r(e,t,s){var i;if(!e)return;let o;o=e.type==="CIMTextSymbol"?e.symbol:e;const a=(o==null?void 0:o.type)==="CIMPolygonSymbol";if(o!=null&&o.symbolLayers)for(const f of o.symbolLayers){if(f.colorLocked)continue;if(a){if(s){const{layersToColor:c}=s;if((M(f)||k(f)&&f.markerPlacement&&n(f.markerPlacement))&&c==="fill"||h(f)&&c==="outline")continue}else if(M(f)||k(f)&&f.markerPlacement&&n(f.markerPlacement))continue}const l=t.toArray();switch(f.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":f.tintColor=l;break;case"CIMVectorMarker":(i=f.markerGraphics)==null||i.forEach(c=>{r(c.symbol,t,s)});break;case"CIMSolidStroke":case"CIMSolidFill":f.color=l;break;case"CIMHatchFill":r(f.lineSymbol,t,s)}}}export{y as I,d as m};
